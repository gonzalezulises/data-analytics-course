id: ex-07-04-dbscan
type: code-python
title: "DBSCAN clustering"
description: "Usa DBSCAN para detectar clusters y outliers."
instructions: |
  1. Aplica DBSCAN con eps=0.5, min_samples=5
  2. Cuenta cuántos outliers hay (cluster = -1)
difficulty: intermediate
estimated_time_minutes: 5
points: 12
order: 4
starter_code: |
  from sklearn.cluster import DBSCAN
  from sklearn.datasets import make_blobs
  from sklearn.preprocessing import StandardScaler
  import numpy as np
  
  # Datos con ruido
  X, _ = make_blobs(n_samples=100, centers=3, random_state=42)
  X = np.vstack([X, np.random.uniform(-10, 10, (10, 2))])  # Agregar ruido
  
  scaler = StandardScaler()
  X_scaled = scaler.fit_transform(X)
  
  # DBSCAN
  dbscan = 
  clusters = 
  
  n_clusters = len(set(clusters)) - (1 if -1 in clusters else 0)
  n_outliers = 
  
  print(f"Clusters encontrados: {n_clusters}")
  print(f"Outliers: {n_outliers}")
solution_code: |
  from sklearn.cluster import DBSCAN
  from sklearn.datasets import make_blobs
  from sklearn.preprocessing import StandardScaler
  import numpy as np
  
  X, _ = make_blobs(n_samples=100, centers=3, random_state=42)
  X = np.vstack([X, np.random.uniform(-10, 10, (10, 2))])
  
  scaler = StandardScaler()
  X_scaled = scaler.fit_transform(X)
  
  dbscan = DBSCAN(eps=0.5, min_samples=5)
  clusters = dbscan.fit_predict(X_scaled)
  
  n_clusters = len(set(clusters)) - (1 if -1 in clusters else 0)
  n_outliers = list(clusters).count(-1)
  
  print(f"Clusters encontrados: {n_clusters}")
  print(f"Outliers: {n_outliers}")
test_cases:
  - id: test-dbscan
    name: "DBSCAN ejecutado"
    test_code: |
      assert n_outliers >= 0, "❌ Outliers debe ser >= 0"
      print(f"✅ DBSCAN: {n_clusters} clusters, {n_outliers} outliers")
    points: 12
hints:
  - "DBSCAN(eps=0.5, min_samples=5)"
  - "Outliers tienen etiqueta -1"
  - "list(clusters).count(-1) cuenta outliers"
tags: [sklearn, dbscan, clustering]
concepts: [dbscan]
